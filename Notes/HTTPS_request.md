HTTP（HyperText Transfer Protocol）和 HTTPS（HTTP Secure）是用于在客户端和服务器之间传输数据的应用层协议。HTTPS 是 HTTP 的安全版本，通过 TLS/SSL 加密传输数据。以下是 HTTP(S) 协议的核心概念和常见的请求方法（Request Methods）的详细说明：

---

### **HTTP(S) 协议概述**
1. **HTTP**：
   - 无状态协议（每个请求独立，服务器不保留上下文）。
   - 默认端口 `80`。
   - 明文传输，不安全。

2. **HTTPS**：
   - HTTP + TLS/SSL 加密。
   - 默认端口 `443`。
   - 提供数据加密、身份验证（证书）和完整性保护。

---

### **HTTP 请求方法（Request Methods）**
HTTP 定义了一组请求方法（也称为 HTTP 动词），用于指定客户端希望服务器执行的操作。

| 方法        | 用途                                           | 是否幂等 | 是否有请求体 |
| ----------- | ---------------------------------------------- | -------- | ------------ |
| **GET**     | 获取资源（查询数据）。                         | 是       | 通常无       |
| **POST**    | 提交数据（创建资源或触发处理）。               | 否       | 有           |
| **PUT**     | 替换整个资源（全量更新）。                     | 是       | 有           |
| **PATCH**   | 部分更新资源（增量更新）。                     | 否       | 有           |
| **DELETE**  | 删除资源。                                     | 是       | 通常无       |
| **OPTIONS** | 获取服务器支持的通信选项（如支持的请求方法）。 | 是       | 无           |

---

### **详细说明**
#### 1. **GET**
- **用途**：请求服务器返回指定资源（只读操作）。
- **示例**：
  
  ```http
  GET /api/users?id=1 HTTP/1.1
  ```
- **特点**：
  - 参数通过 URL 传递（查询字符串 `?key=value`）。
  - 可被缓存、书签保存。
  - 不应修改服务器数据（符合幂等性）。

#### 2. **POST**
- **用途**：向服务器提交数据（常用于创建资源或非幂等操作）。
- **示例**：
  ```http
  POST /api/users HTTP/1.1
  Content-Type: application/json
  
  {"name": "Alice", "age": 25}
  ```
- **特点**：
  - 数据通过请求体（Body）传输（支持 JSON、表单等格式）。
  - 不幂等（多次调用可能产生不同结果，如重复提交订单）。

#### 3. **PUT**
- **用途**：替换目标资源的全部内容（全量更新）。
- **示例**：
  ```http
  PUT /api/users/1 HTTP/1.1
  Content-Type: application/json
  
  {"name": "Alice", "age": 26}
  ```
- **特点**：
  - 幂等（多次调用结果一致）。
  - 需提供完整的资源数据（缺失字段可能被置为默认值）。

#### 4. **PATCH**
- **用途**：部分更新资源（仅发送需要修改的字段）。
- **示例**：
  
  ```http
  PATCH /api/users/1 HTTP/1.1
  Content-Type: application/json
  
  {"age": 27}
  ```
- **特点**：
  
  - 非幂等（依赖实现方式）。
  - 比 PUT 更节省带宽。

#### 5. **DELETE**
- **用途**：请求服务器删除指定资源。
- **示例**：
  ```http
  DELETE /api/users/1 HTTP/1.1
  ```
- **特点**：
  - 幂等（多次删除结果相同）。
  - 成功通常返回 `204 No Content`。

#### 6. **OPTIONS**
- **用途**：获取服务器支持的请求方法（常用于跨域请求预检）。
- **示例**：
  ```http
  OPTIONS /api/users HTTP/1.1
  ```
- **响应示例**：
  ```http
  HTTP/1.1 200 OK
  Allow: GET, POST, PUT, DELETE
  ```

---

### **其他注意事项**
1. **幂等性（Idempotent）**：
   - 幂等方法（GET、PUT、DELETE、OPTIONS）多次调用不会产生副作用。
   - 非幂等方法（POST、PATCH）需谨慎处理重复请求。

2. **安全方法（Safe Methods）**：
   - GET 和 OPTIONS 是安全的（只读操作）。

3. **RESTful API 设计**：
   - 通常用 `POST` 创建资源，`GET` 读取，`PUT/PATCH` 更新，`DELETE` 删除。

4. **跨域请求（CORS）**：
   - 复杂请求（如带自定义头的 POST）会先触发 `OPTIONS` 预检请求。

---

### **总结**
理解 HTTP 请求方法是设计和使用 Web API 的基础。实际开发中需根据操作类型（创建、读取、更新、删除）和幂等性需求选择合适的方法，并遵循 RESTful 最佳实践。HTTPS 则确保这些操作在传输过程中的安全性。



------

## TCP/IP 协议族

+ 计算机与网络设备要相互通信，双方就必须基于相同的方法。比如， 如何探测到通信目标、由哪一边先发起通信、使用哪种语言进行通 信、怎样结束通信等规则都需要事先确定。不同的硬件、操作系统之 间的通信，所有的这一切都需要一种规则。而我们就把这种规则称为 **协议**（protocol）

+ TCP/IP 协议族按层次分别分 为以下 4 层：**应用层、传输层、网络层和数据链路层**
  + 应用层 
    + 应用层决定了向用户提供应用服务时通信的活动。
    + HTTP 协议也处于该层。
  + 传输层
    + 传输层对上层应用层，**提供处于网络连接中的两台计算机之间的数据传输**。
    + 在传输层有两个性质不同的协议：TCP（Transmission Control Protocol，传输控制协议）和 UDP（User Data Protocol，用户数据报 协议）
  + 网络层（又名网络互连层）
    + 网络层用来处理在网络上流动的数据包。数据包是网络传输的最小数 据单位。
    + 该层规定了通过怎样的路径（所谓的传输路线）到达对方计 算机，并把数据包传送给对方。
    + 与对方计算机之间通过多台计算机或网络设备进行传输时，网络层所 起的作用就是**在众多的选项内选择一条传输路线**。
  + 链路层（又名数据链路层，网络接口层）
    + 用来处理连接网络的硬件部分。
    + 包括控制操作系统、硬件的设备驱 动、NIC（Network Interface Card，网络适配器，即网卡），及光纤等 物理可见部分（还包括连接器等一切传输媒介）。硬件上的范畴均在 链路层的作用范围之内。

+ 利用 TCP/IP 协议族进行网络通信时，会通过分层顺序与对方进行通 信。**发送端从应用层往下走，接收端则往应用层往上走**。

  ![http1](D:\Zewang\Java_learning_java学习笔记\Notes\images\http1.png)

+ 以HTTP举例说明：
  + 首先作为发送端的客户端在应用层 （HTTP 协议）发出一个想看某个 Web 页面的 HTTP 请求。
  + 接着，为了传输方便，在传输层（TCP 协议）把从应用层处收到的数 据（HTTP 请求报文）进行分割，并在各个报文上打上标记序号及端 口号后转发给网络层。
  + 在网络层（IP 协议），增加作为通信目的地的 MAC 地址后转发给链 路层。这样一来，发往网络的通信请求就准备齐全了。
  + 接收端的服务器在链路层接收到数据，按序往上层发送，一直到应用 层。当传输到应用层，才能算真正接收到由客户端发送过来的 HTTP 请求。

+ 发送端在层与层之间传输数据时，每经过一层时必定会被打上一个该 层所属的首部信息。反之，接收端在层与层传输数据时，每经过一层 时会把对应的首部消去。 
+ 这种把数据信息包装起来的做法称为封装（encapsulate）

![http2](D:\Zewang\Java_learning_java学习笔记\Notes\images\http2.png)

------



## 与 HTTP 关系密切的协议 : IP、TCP 和 DNS

### IP （Internet Protocol）

+ 负责传输
+ 位于**网络层**
+ 几乎 所有使用网络的系统都会用到 **IP 协议**
+ **IP 协议的作用是把各种数据包传送给对方**。而要保证确实传送到对方 那里，则需要满足各类条件。其中两个重要的条件是 IP 地址和 MAC 地址（Media Access Control Address）
  + IP 地址指明了节点被分配到的地址
  + MAC 地址是指网卡所属的固定 地址
  + IP 地址可以和 MAC 地址进行配对
  + IP 地址可变换，但 MAC 地址基本上不会更改

+ 使用 **ARP 协议**凭借 **MAC 地址**进行**通信**

  **IP 间的通信依赖 MAC 地址**。在网络上，通信的双方在同一局域网 （LAN）内的情况是很少的，通常是经过多台计算机和网络设备中转 才能连接到对方。而在进行**中转**时，会利用**下一站中转设备的 MAC 地址**来搜索**下一个中转目标**。这时，会采用 **ARP 协议**（Address Resolution Protocol）。**ARP 是一种用以解析地址的协议，根据通信方 的 IP 地址就可以反查出对应的 MAC 地址**

+ 在到达通信目标前的中转过程中，那些计算机和路由器等网络设备只 能获悉很粗略的传输路线。这种机制称为**路由选择（routing）**

  > 有点像快递公司的送货过程。想要寄快递的人，只要将自己的货物送到集散中心，就可以知道快递公司是否肯收件发货，该快递公司的集散中心检查货物的送达地址，明确下站该送往哪个区域的集散中心。接着，那个区域的集散中心自会判断是否能送到对方的家中

![ARP.npg](D:\Zewang\Java_learning_java学习笔记\Notes\images\ARP.npg.png)

------



### TCP

+ 确保可靠性

+ 位于**传输层**，提供可靠的**字节流服务**

  + 字节流服务：为了方便传输，将大 块数据分割成以**报文段（segment）**为单位的**数据包**进行管理。而可 靠的传输服务是指，能够把数据准确可靠地传给对方。一言以蔽之， **TCP 协议为了更容易传送大数据才把数据分割，而且 TCP 协议能够 确认数据最终是否送达到对方**

+ **确保数据能够到达目标** *（重点）*

  + **三次握手**（three-way handshaking）

    用 TCP 协议把数据包送出去后，TCP 不会对传送后的情况置之不理，它一定会向对方确认是否成功送达。  握手过程中使用了 TCP 的标志（flag） —— SYN（synchronize） 和 ACK（acknowledgement）。

    + **发送端首先发送一个带 SYN 标志的数据包给对方。**
    + **接收端收到后， 回传一个带有 SYN/ACK 标志的数据包以示传达确认信息。**
    + **最后，发 送端再回传一个带 ACK 标志的数据包，代表“握手”结束。**
    + 若在握手过程中某个阶段莫名中断，TCP 协议会再次以相同的顺序发 送相同的数据包。

------



### DNS

+ 提供通过域名 查找 IP 地址，或逆向从 IP 地址反查域名的服务
+ 和 HTTP 协议一样位于应用层的 协议

> 用户通常使用主机名或域名来访问对方的计算机，而不是直接通过 IP 地址访问。因为与 IP 地址的一组纯数字相比，用字母配合数字的表 示形式来指定计算机名更符合人类的记忆习惯。但要让计算机去理解名称，相对而言就变得困难了。因为计算机更擅 长处理一长串数字。

![DNS](D:\Zewang\Java_learning_java学习笔记\Notes\images\DNS.png)

------



### 各种协议与HTTP协议的关系

![协议关系](D:\Zewang\Java_learning_java学习笔记\Notes\images\协议关系.png)

 

------



## URI和URL

### 统一资源标识符

+ URI 是 Uniform Resource Identifier 的缩写
  + Uniform：规定统一的格式可方便处理多种不同类型的资源，而不用根据上下文 环境来识别资源指定的访问方式。另外，加入新增的协议方案（如 http: 或 ftp:）也更容易
  + Resource：资源的定义是“可标识的任何东西”。除了文档文件、图像或服务（例 如当天的天气预报）等能够区别于其他类型的，全都可作为资源。另 外，资源不仅可以是单一的，也可以是多数的集合体
  + Identifier：表示可标识的对象。也称为标识符
+ 综上所述，URI 就是由**某个协议方案表示的资源的定位标识符**。协议 方案是指**访问资源所使用的协议类型名称**。
+ 采用 HTTP 协议时，协议方案就是 http。*除此之外，还有 ftp、 25 mailto、telnet、file 等*

+  URI 用字符串**标识**某一互联网资源，而 URL 表示资源的地点（互联 网上所处的位置）。
+ **可见 URL 是 URI 的子集。**

------

### URI格式

+ 表示指定的 URI，要使用涵盖全部必要信息的绝对 URI、绝对 URL 以 及相对 URL。相对 URL，是指从浏览器中基本 URI 处指定的 URL， 形如 /image/logo.gif。

+ 绝对URI：
  ![绝对URI](D:\Zewang\Java_learning_java学习笔记\Notes\images\绝对URI.png)

+ 使用`http: `或 `https:`  等协议方案名获取访问资源时要指定协议类型。不 区分字母大小写，最后附一个冒号（:）

+ 也可使用 data: 或 javascript: 这类指定数据或脚本程序的方案名

+ 登录信息（认证）：

  + 指定用户名和密码作为从服务器端获取资源时必要的登录信息（身份 认证）。

  + 此项是可选项。

+ 服务器地址：

  + 使用绝对 URI 必须指定待访问的服务器地址
  + 。地址可以是类似 `hackr.jp` 这种 DNS 可解析的名称，
  + 或是` 192.168.1.1` 这类 IPv4 地址 名，
  + 还可以是 `[0:0:0:0:0:0:0:1]` 这样用方括号括起来的 IPv6 地址名。

+ 服务器端口号：

  + 指定服务器连接的网络端口号。
  + 此项也是可选项，若用户省略则自动 使用默认端口号

+ 带层次的文件路径：
  指定服务器上的文件路径来定位特指的资源。这与 UNIX 系统的文件 目录结构相似。
+ 查询字符串：
  + 针对已指定的文件路径内的资源，可以使用查询字符串传入任意参 数。
  + 此项可选。
+ 片段标识符：
  + 使用片段标识符通常可标记出已获取资源中的子资源（文档内的某个 位置）
  + 该项也为可选 项